<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <title>é«˜éµæ™‚åˆ»æŸ¥è©¢ç³»çµ±</title>
    <style>
        body {
            background-image: url("/flowerPic.jpg"); /* è®€å–æˆ‘çš„èƒŒæ™¯åœ–ç‰‡ï¼Œæª”æ¡ˆæ”¾åœ¨staticè³‡æ–™å¤¾å…§ */
            background-size: cover; /* è®“èƒŒæ™¯å¡«æ»¿æ•´å€‹ç•«é¢ */
            background-repeat: no-repeat; /* é¿å…åœ–ç‰‡é‡è¤‡ */
            font-family: Arial; /* è¨­å®šå­—é«”å„ªå…ˆåº¦ */
            margin: 30px;
        }
        label {
            margin-right: 10px;
        }
        select, input {
            margin-right: 20px;
        }
        table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
            background-color: #fdfdfd;
        }
        th {
            border: 1px solid #0c0c0c;
            padding: 8px;
            text-align: center;
            background-color: #aaaaaa;
        }
        td {
            border: 1px solid #0c0c0c;
            padding: 8px;
            text-align: center;
            background-color: #fdfdfd;
        }

        #fromStation {
            font-size: 22px;
        }
        #toStation {
            font-size: 22px;
        }

        #travelDate {
            font-size: 22px;
        }

        #departTime {
            font-size: 22px;
        }
        .btn {
            font-size: 22px;
        }

        .railTitle {
            text-align: center;
        }
    </style>
</head>
<body>

<h2 class="railTitle"> å°ç£é«˜éµæ™‚åˆ»è¡¨æŸ¥è©¢</h2>

<label>å‡ºç™¼ç«™ï¼š</label>
<select id="fromStation">
    <option value="1000">å°åŒ—</option>
    <option value="1010">æ¿æ©‹</option>
    <option value="1020">æ¡ƒåœ’</option>
    <option value="1030">æ–°ç«¹</option>
    <option value="1035">è‹—æ —</option>
    <option value="1040">å°ä¸­</option>
    <option value="1043">å½°åŒ–</option>
    <option value="1047">é›²æ—</option>
    <option value="1050">å˜‰ç¾©</option>
    <option value="1060">å°å—</option>
    <option value="1070">å·¦ç‡Ÿ</option>
</select>

<label>åˆ°é”ç«™ï¼š</label>
<select id="toStation">
    <option value="1000">å°åŒ—</option>
    <option value="1010">æ¿æ©‹</option>
    <option value="1020">æ¡ƒåœ’</option>
    <option value="1030">æ–°ç«¹</option>
    <option value="1035">è‹—æ —</option>
    <option value="1040">å°ä¸­</option>
    <option value="1043">å½°åŒ–</option>
    <option value="1047">é›²æ—</option>
    <option value="1050">å˜‰ç¾©</option>
    <option value="1060">å°å—</option>
    <option value="1070">å·¦ç‡Ÿ</option>
</select>

<label>æ—¥æœŸï¼š</label>
<input type="date" id="travelDate" value="2025-08-01">

<!-- ğŸŸ© å‡ºç™¼æ™‚é–“è¼¸å…¥æ¬„ä½ï¼ˆæ–°å¢çš„ï¼‰ -->
<label>å‡ºç™¼æ™‚é–“ï¼š</label>
<input type="time" id="departTime" placeholder="å¯é¸å¡«">
<small style="color: gray;">ï¼ˆå¯ç©ºç™½ï¼Œé è¨­é¡¯ç¤ºæ•´å¤©ç­æ¬¡ï¼‰</small>

<button class="btn" onclick="querySchedule()">æŸ¥è©¢</button>

<table id="resultTable" style="display:none;">
    <thead>
    <tr>
        <th>è»Šæ¬¡</th>
        <th>å‡ºç™¼æ™‚é–“</th>
        <th>æŠµé”æ™‚é–“</th>
        <th>èµ·å§‹ç«™</th>
        <th>çµ‚é»ç«™</th>
    </tr>
    </thead>
    <tbody id="resultBody"></tbody>
</table>

<script>
    function querySchedule() {
        const from = document.getElementById("fromStation").value;
        const to = document.getElementById("toStation").value;
        const date = document.getElementById("travelDate").value;
        const departTime = document.getElementById("departTime").value; // æ–°å¢æ™‚é–“åƒæ•¸

        // åŠ ä¸Šæ™‚é–“åƒæ•¸çš„æŸ¥è©¢å­—ä¸²
        let url = `/hsr/schedule?from=${from}&to=${to}&date=${date}`;
        if (departTime) {
            url += `&time=${departTime}`;
        }

        fetch(url)
            .then(res => res.json())
            .then(data => {
                const tbody = document.getElementById("resultBody");
                tbody.innerHTML = ""; // æ¸…é™¤ä¸Šä¸€ç­†æŸ¥è©¢çµæœ

                data.forEach(item => {
                    const row = `<tr>
                    <td>${item.trainNo}</td>
                    <td>${item.departureTime}</td>
                    <td>${item.arrivalTime}</td>
                    <td>${item.startStationName}</td>
                    <td>${item.endStationName}</td>
                </tr>`;
                    tbody.innerHTML += row;
                });

                document.getElementById("resultTable").style.display = "table";
            })
            .catch(err => {
                alert("æŸ¥è©¢å¤±æ•—ï¼š" + err);
                document.getElementById("resultTable").style.display = "none";
            });
    }

</script>

</body>
</html>
